{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///home/parker/winterproject/frontend/src/app/sidebar.tsx"],"sourcesContent":["'use client';\nimport React from 'react';\n\ninterface SidebarProps {\n  isPinMode: boolean;\n  onPinClick: () => void;\n  radius: number;\n  onRadiusChange: (val: number) => void;\n  hasActivePin: boolean;\n  onDeletePin: () => void;\n  isConfirmMode: boolean;\n  onConfirmClick: () => void;\n  \n  // Category Props\n  category: string;\n  onCategoryChange: (val: string) => void;\n\n  // Demand Data Props\n  demandSummary: Record<string, number> | null;\n  onUpvote: (categoryName: string) => void;\n}\n\nexport default function Sidebar({ \n  isPinMode, \n  onPinClick, \n  radius, \n  onRadiusChange, \n  hasActivePin, \n  onDeletePin,\n  isConfirmMode,\n  onConfirmClick,\n  category,\n  onCategoryChange,\n  demandSummary,\n  onUpvote\n}: SidebarProps) {\n  return (\n    <aside className=\"w-[350px] h-full bg-white border-r shadow-lg flex flex-col p-6 space-y-8 z-10\">\n      \n      {/* HEADER */}\n      <div>\n        <h2 className=\"text-2xl font-bold text-gray-800\">Make a Wish</h2>\n        <p className=\"text-sm text-gray-500 mt-1\">Tell landlords what this area needs.</p>\n      </div>\n\n      {/* 1. CATEGORY SELECTION */}\n      <div className=\"flex flex-col space-y-2\">\n        <label className=\"text-sm font-semibold text-gray-700\">What is missing here?</label>\n        <select \n            value={category}\n            onChange={(e) => onCategoryChange(e.target.value)}\n            className=\"w-full p-3 border border-gray-200 rounded-xl bg-gray-50 text-gray-800 focus:ring-2 focus:ring-blue-500 outline-none transition-all\"\n        >\n            <option value=\"Coffee Shop\">‚òï Coffee Shop</option>\n            <option value=\"Gym\">üí™ Gym / Fitness</option>\n            <option value=\"Bakery\">ü•ê Bakery</option>\n            <option value=\"Grocery\">ü•¶ Grocery Store</option>\n            <option value=\"Daycare\">üë∂ Daycare</option>\n            <option value=\"Coworking\">üíª Coworking Space</option>\n        </select>\n      </div>\n\n      {/* 2. THE RADIUS SLIDER */}\n      <div className=\"flex flex-col space-y-4\">\n        <div className=\"flex justify-between items-center\">\n          <label className=\"text-sm font-semibold text-gray-700\">How far would you travel?</label>\n          <span className=\"bg-blue-100 text-blue-700 px-2 py-1 rounded text-xs font-bold\">\n            {radius} miles\n          </span>\n        </div>\n        <input \n          type=\"range\" \n          min=\"0.5\" \n          max=\"5\" \n          step=\"0.5\"\n          value={radius}\n          onChange={(e) => onRadiusChange(Number(e.target.value))}\n          className=\"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-600\"\n        />\n        <div className=\"flex justify-between text-[10px] text-gray-400 px-1\">\n          <span>Walking (0.5mi)</span>\n          <span>Driving (5mi)</span>\n        </div>\n      </div>\n\n      <hr className=\"border-gray-100\" />\n\n      {/* 3. ACTION BUTTONS */}\n      <div className=\"flex flex-col gap-3\">\n        {!isConfirmMode ? (\n          <button \n            onClick={onPinClick}\n            className={`w-full py-3 rounded-xl font-bold shadow-md transition-all flex items-center justify-center gap-2 ${\n              isPinMode ? 'bg-gray-400 text-white cursor-not-allowed' : 'bg-blue-600 text-white hover:bg-blue-700'\n            }`}\n            disabled={isPinMode}\n          >\n            {isPinMode ? 'Click on Map...' : 'üìç Drop Pin'}\n          </button>\n        ) : (\n          <button \n            onClick={onConfirmClick}\n            className=\"w-full py-3 rounded-xl font-bold bg-green-600 text-white shadow-md hover:bg-green-700 transition-all flex items-center justify-center gap-2\"\n          >\n            <span>‚úÖ</span> Confirm Wish\n          </button>\n        )}\n\n        {hasActivePin && (\n          <button \n            onClick={onDeletePin} \n            className=\"w-full py-2 rounded-xl font-semibold text-red-500 border border-red-200 hover:bg-red-50 transition-colors text-sm\"\n          >\n            Cancel\n          </button>\n        )}\n      </div>\n\n      {/* 4. RESULTS / SUGGESTIONS (DYNAMIC) */}\n      <div className=\"flex-1 border-t pt-4 overflow-hidden flex flex-col\">\n        {demandSummary ? (\n          <div className=\"flex flex-col h-full animate-in fade-in slide-in-from-bottom-2 duration-300\">\n            <div className=\"flex justify-between items-center mb-3\">\n              <h3 className=\"text-sm font-bold text-gray-700 uppercase tracking-wider\">\n                Local Demand\n              </h3>\n              <span className=\"text-[10px] bg-gray-100 text-gray-500 px-2 py-1 rounded-full\">\n                Live Data\n              </span>\n            </div>\n            \n            <div className=\"overflow-y-auto pr-2 space-y-3 flex-1 scrollbar-thin scrollbar-thumb-gray-200\">\n              {Object.entries(demandSummary)\n                .sort(([, a], [, b]) => b - a)\n                .map(([cat, count]) => (\n                  <div key={cat} className=\"flex justify-between items-center p-3 bg-blue-50 rounded-xl border border-blue-100 hover:border-blue-300 transition-colors group\">\n                    \n                    {/* Left side: Text */}\n                    <div className=\"flex flex-col\">\n                        <span className=\"text-sm font-medium text-gray-800\">{cat}</span>\n                        <span className=\"text-[10px] text-gray-500\">\n                           {count} {count === 1 ? 'person wants' : 'people want'} this\n                        </span>\n                    </div>\n\n                    {/* Right side: Upvote Button */}\n                    <button \n                        onClick={() => onUpvote(cat)}\n                        className=\"bg-white text-blue-600 hover:bg-blue-600 hover:text-white border border-blue-200 p-2 rounded-full shadow-sm transition-all active:scale-95 flex items-center justify-center\"\n                        title=\"I want this too!\"\n                    >\n                        <span className=\"text-xs font-bold\">üëç +1</span>\n                    </button>\n\n                  </div>\n                ))}\n              \n              {Object.keys(demandSummary).length === 0 && (\n                <p className=\"text-sm text-gray-400 text-center mt-4\">No wishes found here yet.</p>\n              )}\n            </div>\n          </div>\n        ) : (\n          <div className=\"flex flex-col items-center justify-center flex-1 text-center text-gray-400 border-2 border-dashed border-gray-100 rounded-xl px-4\">\n            <p className=\"text-xs\">\n              {isConfirmMode \n                ? \"Drag pin to exact spot.\" \n                : \"Click a building to upvote wishes.\"}\n            </p>\n          </div>\n        )}\n      </div>\n    </aside>\n  );\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 385, "column": 0}, "map": {"version":3,"sources":["file:///home/parker/winterproject/frontend/src/app/map.tsx"],"sourcesContent":["'use client';\nimport React, { useEffect, useRef, useState } from 'react';\n\nconst GOOGLE_MAPS_API_KEY = process.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY || '';\n\ninterface Property {\n  id: number;\n  address: string;\n  price: number;\n  latitude: number;\n  longitude: number;\n  description: string;\n}\n\ninterface MapProps {\n  isPinMode: boolean;\n  setPinMode: (value: boolean) => void;\n  searchRadius: number;\n  hasActivePin: boolean;\n  setHasActivePin: (value: boolean) => void;\n  isConfirmMode: boolean;\n  setIsConfirmMode: (value: boolean) => void;\n  onPinPositionChange: (lat: number, lng: number) => void;\n  properties: Property[];\n  \n  // NEW PROP: Function to call when a property is clicked\n  onPropertyClick?: (lat: number, lng: number) => void;\n}\n\nexport default function GoogleMapsComponent({ \n  isPinMode, \n  setPinMode, \n  searchRadius,\n  hasActivePin,\n  setHasActivePin,\n  isConfirmMode,\n  setIsConfirmMode,\n  onPinPositionChange,\n  properties,\n  onPropertyClick // <--- Destructure new prop\n}: MapProps) {\n  const mapRef = useRef<HTMLDivElement>(null);\n  const mapInstanceRef = useRef<google.maps.Map | null>(null);\n  \n  const currentMarkerRef = useRef<any>(null); \n  const currentCircleRef = useRef<google.maps.Circle | null>(null);\n  const propertyMarkersRef = useRef<any[]>([]);\n  \n  const [isLoaded, setIsLoaded] = useState(false);\n\n  useEffect(() => {\n    if (window.google?.maps) { setIsLoaded(true); return; }\n    const script = document.createElement('script');\n    script.src = `https://maps.googleapis.com/maps/api/js?key=${GOOGLE_MAPS_API_KEY}&v=weekly&libraries=marker`;\n    script.async = true;\n    script.onload = () => setIsLoaded(true);\n    document.head.appendChild(script);\n  }, []);\n\n  useEffect(() => {\n    if (!isLoaded || !mapRef.current || mapInstanceRef.current) return;\n    mapInstanceRef.current = new google.maps.Map(mapRef.current, {\n      zoom: 13,\n      center: { lat: 40.7484, lng: -73.9857 }, \n      mapId: 'DEMO_MAP_ID', \n      disableDefaultUI: true, // Clean look\n      zoomControl: true,\n    });\n  }, [isLoaded]);\n\n  // --- RENDER PROPERTIES (Green Tags) ---\n  useEffect(() => {\n    if (!mapInstanceRef.current || !window.google) return;\n    \n    // Clear old markers\n    propertyMarkersRef.current.forEach(marker => marker.map = null);\n    propertyMarkersRef.current = [];\n\n    properties.forEach(async (prop) => {\n        const { AdvancedMarkerElement } = await google.maps.importLibrary(\"marker\") as google.maps.MarkerLibrary;\n        \n        // Create the Green Tag\n        const tag = document.createElement('div');\n        tag.className = 'bg-green-600 text-white px-2 py-1 rounded shadow-md text-xs font-bold border border-white transform hover:scale-110 transition-transform cursor-pointer';\n        tag.innerText = `$${(prop.price / 1000).toFixed(0)}k`;\n\n        const marker = new AdvancedMarkerElement({\n            map: mapInstanceRef.current,\n            position: { lat: prop.latitude, lng: prop.longitude },\n            content: tag,\n            title: prop.address\n        });\n\n        // --- NEW CLICK LISTENER ---\n        marker.addListener(\"click\", () => {\n            // Instead of opening a popup, we tell the Parent Component (Home)\n            // that this property was clicked.\n            if (onPropertyClick) {\n                onPropertyClick(prop.latitude, prop.longitude);\n            }\n            \n            // Optional: Center map on click smoothly\n            mapInstanceRef.current?.panTo({ lat: prop.latitude, lng: prop.longitude });\n        });\n\n        propertyMarkersRef.current.push(marker);\n    });\n\n  }, [properties, isLoaded, onPropertyClick]); // Re-run if properties or handler changes\n\n  // --- PINNING LOGIC (Standard) ---\n  useEffect(() => {\n    if (currentCircleRef.current) {\n      const meters = searchRadius * 1609.34;\n      currentCircleRef.current.setRadius(meters);\n    }\n  }, [searchRadius]);\n\n  useEffect(() => {\n    if (!hasActivePin) {\n      if (currentMarkerRef.current) { currentMarkerRef.current.map = null; currentMarkerRef.current = null; }\n      if (currentCircleRef.current) { currentCircleRef.current.setMap(null); currentCircleRef.current = null; }\n    }\n  }, [hasActivePin]);\n\n  useEffect(() => {\n    if (currentMarkerRef.current) {\n      currentMarkerRef.current.gmpDraggable = isConfirmMode;\n    }\n  }, [isConfirmMode]);\n\n  useEffect(() => {\n    if (!mapInstanceRef.current || !isPinMode) return;\n    const map = mapInstanceRef.current;\n    map.setOptions({ draggableCursor: 'crosshair' });\n\n    const clickListener = map.addListener('click', async (e: google.maps.MapMouseEvent) => {\n      if (!e.latLng) return;\n\n      onPinPositionChange(e.latLng.lat(), e.latLng.lng());\n\n      if (currentMarkerRef.current) currentMarkerRef.current.map = null;\n      if (currentCircleRef.current) currentCircleRef.current.setMap(null);\n\n      const { AdvancedMarkerElement } = await google.maps.importLibrary(\"marker\") as google.maps.MarkerLibrary;\n\n      const pinElement = document.createElement('div');\n      pinElement.className = 'bg-white text-blue-600 px-3 py-1 rounded-full border-2 border-blue-600 font-bold shadow-lg text-sm cursor-grab';\n      pinElement.innerText = 'New Wish';\n\n      const newMarker = new AdvancedMarkerElement({\n        map,\n        position: e.latLng,\n        content: pinElement,\n        gmpDraggable: true, \n      });\n\n      const newCircle = new google.maps.Circle({\n        map,\n        center: e.latLng,\n        radius: searchRadius * 1609.34,\n        fillColor: \"#1a73e8\",\n        fillOpacity: 0.2,\n        strokeColor: \"#1a73e8\",\n        strokeWeight: 1,\n        clickable: false,\n      });\n\n      newMarker.addListener('drag', () => {\n        const newPos = newMarker.position as google.maps.LatLng;\n        if (newPos) {\n          newCircle.setCenter(newPos);\n          if(typeof newPos.lat === 'function') onPinPositionChange(newPos.lat(), newPos.lng());\n        }\n      });\n      \n      newMarker.addListener('dragend', () => {\n          const newPos = newMarker.position as google.maps.LatLng;\n          if(newPos && typeof newPos.lat === 'function') onPinPositionChange(newPos.lat(), newPos.lng());\n      });\n\n      currentMarkerRef.current = newMarker;\n      currentCircleRef.current = newCircle;\n\n      setHasActivePin(true);\n      setIsConfirmMode(true); \n      setPinMode(false);\n      map.setOptions({ draggableCursor: null });\n    });\n\n    return () => google.maps.event.removeListener(clickListener);\n  }, [isPinMode, searchRadius, setPinMode, setHasActivePin, setIsConfirmMode, onPinPositionChange]);\n\n  return (\n    <div className=\"w-full h-full relative\">\n      <div ref={mapRef} className=\"w-full h-full\" />\n    </div>\n  );\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 580, "column": 0}, "map": {"version":3,"sources":["file:///home/parker/winterproject/frontend/src/app/page.tsx"],"sourcesContent":["'use client';\nimport React, { useState, useEffect } from 'react';\nimport Sidebar from './sidebar';\nimport GoogleMapsComponent from './map';\n\n// Define Types\ninterface Property {\n  id: number;\n  address: string;\n  price: number;\n  latitude: number;\n  longitude: number;\n  description: string;\n}\n\nexport default function Home() {\n  // UI State\n  const [isPinMode, setIsPinMode] = useState<boolean>(false);\n  const [isConfirmMode, setIsConfirmMode] = useState<boolean>(false);\n  const [hasActivePin, setHasActivePin] = useState<boolean>(false);\n  \n  // Data Inputs\n  const [radius, setRadius] = useState<number>(1); \n  const [category, setCategory] = useState<string>(\"Coffee Shop\"); \n\n  // Location State\n  const [searchLocation, setSearchLocation] = useState<{lat: number, lng: number} | null>(null);\n  const [viewingLocation, setViewingLocation] = useState<{lat: number, lng: number} | null>(null);\n  \n  // Data State\n  const [properties, setProperties] = useState<Property[]>([]); \n  const [demandSummary, setDemandSummary] = useState<Record<string, number> | null>(null);\n\n  useEffect(() => {\n    fetchProperties();\n  }, []);\n\n  const fetchProperties = () => {\n    fetch(`http://localhost:8080/search?lat=40.7484&lon=-73.9857&radius=20.0`)\n      .then(res => res.json())\n      .then(data => setProperties(data))\n      .catch(err => console.error(\"Error fetching properties:\", err));\n  };\n\n  // --- HANDLER 1: CLICK A PROPERTY (View Demand) ---\n  const handlePropertyClick = (lat: number, lng: number) => {\n    console.log(\"Property Clicked:\", lat, lng);\n    setViewingLocation({ lat, lng });\n    setHasActivePin(false);\n    setIsConfirmMode(false);\n    setIsPinMode(false);\n\n    fetch(`http://localhost:8080/demand-summary?lat=${lat}&lon=${lng}`)\n        .then(res => res.json())\n        .then(data => setDemandSummary(data))\n        .catch(err => console.error(\"Error fetching demand:\", err));\n  };\n\n  // --- HANDLER 2: UPVOTE (Add +1 to existing demand) ---\n  const handleUpvote = (categoryToUpvote: string) => {\n    if (!viewingLocation) return;\n    console.log(\"Upvoting:\", categoryToUpvote);\n\n    fetch('http://localhost:8080/wish', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n            category: categoryToUpvote,\n            latitude: viewingLocation.lat,\n            longitude: viewingLocation.lng,\n            radiusMeters: 400\n        })\n    })\n    .then(res => res.json())\n    .then(() => {\n        // Refresh the list immediately\n        handlePropertyClick(viewingLocation.lat, viewingLocation.lng);\n    })\n    .catch(err => alert(\"Error upvoting: \" + err));\n  };\n\n  // --- HANDLER 3: CONFIRM NEW WISH (The one that was broken) ---\n  const handleConfirm = () => {\n    console.log(\"Confirm button clicked!\"); // DEBUG LOG\n\n    if (!searchLocation) {\n        alert(\"Error: No location selected. Please drop a pin first.\");\n        return;\n    }\n\n    const radiusMeters = radius * 1609.34; \n\n    // Save to Backend\n    fetch('http://localhost:8080/wish', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n            category: category,\n            latitude: searchLocation.lat,\n            longitude: searchLocation.lng,\n            radiusMeters: radiusMeters\n        })\n    })\n    .then(res => {\n        if (!res.ok) throw new Error(\"Backend failed\");\n        return res.json();\n    })\n    .then(() => {\n        // Success Logic\n        setHasActivePin(false);\n        setIsConfirmMode(false); \n        setSearchLocation(null);\n        setDemandSummary(null); \n        alert(\"Wish saved successfully!\");\n    })\n    .catch(err => {\n        console.error(\"Error saving wish:\", err);\n        alert(\"Failed to save wish. Check your backend console.\");\n    });\n  };\n\n  return (\n    <div className=\"flex flex-col h-screen w-full\">\n      <div className=\"flex flex-row flex-1 overflow-hidden\">\n        <Sidebar \n          isPinMode={isPinMode}\n          isConfirmMode={isConfirmMode}\n          onPinClick={() => setIsPinMode(true)}\n          onConfirmClick={handleConfirm}\n          radius={radius}\n          onRadiusChange={setRadius}\n          category={category}\n          onCategoryChange={setCategory}\n          hasActivePin={hasActivePin}\n          onDeletePin={() => {\n            setHasActivePin(false);\n            setIsConfirmMode(false);\n            setSearchLocation(null);\n            setDemandSummary(null);\n            setViewingLocation(null);\n          }}\n          demandSummary={demandSummary}\n          onUpvote={handleUpvote}\n        />\n\n        <main className=\"flex-1 h-full relative\">\n          <GoogleMapsComponent \n            isPinMode={isPinMode}\n            setPinMode={setIsPinMode}\n            isConfirmMode={isConfirmMode}\n            setIsConfirmMode={setIsConfirmMode}\n            searchRadius={radius}\n            hasActivePin={hasActivePin}\n            setHasActivePin={setHasActivePin}\n            properties={properties} \n            onPinPositionChange={(lat, lng) => setSearchLocation({ lat, lng })}\n            onPropertyClick={handlePropertyClick}\n          />\n        </main>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAHA;;;;;AAee,SAAS;IACtB,WAAW;IACX,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,6NAAQ,EAAU;IACpD,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,6NAAQ,EAAU;IAC5D,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,6NAAQ,EAAU;IAE1D,cAAc;IACd,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,6NAAQ,EAAS;IAC7C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,6NAAQ,EAAS;IAEjD,iBAAiB;IACjB,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,6NAAQ,EAAoC;IACxF,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,6NAAQ,EAAoC;IAE1F,aAAa;IACb,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,6NAAQ,EAAa,EAAE;IAC3D,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,6NAAQ,EAAgC;IAElF,IAAA,8NAAS,EAAC;QACR;IACF,GAAG,EAAE;IAEL,MAAM,kBAAkB;QACtB,MAAM,CAAC,iEAAiE,CAAC,EACtE,IAAI,CAAC,CAAA,MAAO,IAAI,IAAI,IACpB,IAAI,CAAC,CAAA,OAAQ,cAAc,OAC3B,KAAK,CAAC,CAAA,MAAO,QAAQ,KAAK,CAAC,8BAA8B;IAC9D;IAEA,oDAAoD;IACpD,MAAM,sBAAsB,CAAC,KAAa;QACxC,QAAQ,GAAG,CAAC,qBAAqB,KAAK;QACtC,mBAAmB;YAAE;YAAK;QAAI;QAC9B,gBAAgB;QAChB,iBAAiB;QACjB,aAAa;QAEb,MAAM,CAAC,yCAAyC,EAAE,IAAI,KAAK,EAAE,KAAK,EAC7D,IAAI,CAAC,CAAA,MAAO,IAAI,IAAI,IACpB,IAAI,CAAC,CAAA,OAAQ,iBAAiB,OAC9B,KAAK,CAAC,CAAA,MAAO,QAAQ,KAAK,CAAC,0BAA0B;IAC5D;IAEA,wDAAwD;IACxD,MAAM,eAAe,CAAC;QACpB,IAAI,CAAC,iBAAiB;QACtB,QAAQ,GAAG,CAAC,aAAa;QAEzB,MAAM,8BAA8B;YAChC,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,KAAK,SAAS,CAAC;gBACjB,UAAU;gBACV,UAAU,gBAAgB,GAAG;gBAC7B,WAAW,gBAAgB,GAAG;gBAC9B,cAAc;YAClB;QACJ,GACC,IAAI,CAAC,CAAA,MAAO,IAAI,IAAI,IACpB,IAAI,CAAC;YACF,+BAA+B;YAC/B,oBAAoB,gBAAgB,GAAG,EAAE,gBAAgB,GAAG;QAChE,GACC,KAAK,CAAC,CAAA,MAAO,MAAM,qBAAqB;IAC3C;IAEA,gEAAgE;IAChE,MAAM,gBAAgB;QACpB,QAAQ,GAAG,CAAC,4BAA4B,YAAY;QAEpD,IAAI,CAAC,gBAAgB;YACjB,MAAM;YACN;QACJ;QAEA,MAAM,eAAe,SAAS;QAE9B,kBAAkB;QAClB,MAAM,8BAA8B;YAChC,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,KAAK,SAAS,CAAC;gBACjB,UAAU;gBACV,UAAU,eAAe,GAAG;gBAC5B,WAAW,eAAe,GAAG;gBAC7B,cAAc;YAClB;QACJ,GACC,IAAI,CAAC,CAAA;YACF,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;YAC7B,OAAO,IAAI,IAAI;QACnB,GACC,IAAI,CAAC;YACF,gBAAgB;YAChB,gBAAgB;YAChB,iBAAiB;YACjB,kBAAkB;YAClB,iBAAiB;YACjB,MAAM;QACV,GACC,KAAK,CAAC,CAAA;YACH,QAAQ,KAAK,CAAC,sBAAsB;YACpC,MAAM;QACV;IACF;IAEA,qBACE,0PAAC;QAAI,WAAU;kBACb,cAAA,0PAAC;YAAI,WAAU;;8BACb,0PAAC,6IAAO;oBACN,WAAW;oBACX,eAAe;oBACf,YAAY,IAAM,aAAa;oBAC/B,gBAAgB;oBAChB,QAAQ;oBACR,gBAAgB;oBAChB,UAAU;oBACV,kBAAkB;oBAClB,cAAc;oBACd,aAAa;wBACX,gBAAgB;wBAChB,iBAAiB;wBACjB,kBAAkB;wBAClB,iBAAiB;wBACjB,mBAAmB;oBACrB;oBACA,eAAe;oBACf,UAAU;;;;;;8BAGZ,0PAAC;oBAAK,WAAU;8BACd,cAAA,0PAAC,yIAAmB;wBAClB,WAAW;wBACX,YAAY;wBACZ,eAAe;wBACf,kBAAkB;wBAClB,cAAc;wBACd,cAAc;wBACd,iBAAiB;wBACjB,YAAY;wBACZ,qBAAqB,CAAC,KAAK,MAAQ,kBAAkB;gCAAE;gCAAK;4BAAI;wBAChE,iBAAiB;;;;;;;;;;;;;;;;;;;;;;AAM7B"}},
    {"offset": {"line": 751, "column": 0}, "map": {"version":3,"sources":["file:///home/parker/winterproject/frontend/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":"AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,QAAQ;;KAElC;IACL,IAAIF,QAAQC,GAAG,CAACK,yBAAyB,EAAE;;SAcpC;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;QAGT,OAAO;;IAOT;AACF","ignoreList":[0]}},
    {"offset": {"line": 770, "column": 0}, "map": {"version":3,"sources":["file:///home/parker/winterproject/frontend/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,qIACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0]}},
    {"offset": {"line": 775, "column": 0}, "map": {"version":3,"sources":["file:///home/parker/winterproject/frontend/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n"],"names":["module","exports","require","vendored","React"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,qIACRC,QAAQ,CAAC,YAAY,CAAEC,KAAK","ignoreList":[0]}}]
}