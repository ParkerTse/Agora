{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///home/parker/winterproject/frontend/src/hooks/usePlacesAutocomplete.ts"],"sourcesContent":["import { useState, useEffect } from 'react';\n\n// You need to install this type if you haven't: npm install --save-dev @types/google.maps\n// Or just ignore the error if your project is loose with types.\n\nexport const usePlacesAutocomplete = (query: string) => {\n  const [predictions, setPredictions] = useState<google.maps.places.AutocompletePrediction[]>([]);\n\n  useEffect(() => {\n    // 1. If query is empty or Google API isn't loaded, do nothing\n    if (!query || query.length < 3 || !window.google || !window.google.maps || !window.google.maps.places) {\n      setPredictions([]);\n      return;\n    }\n\n    // 2. Create the service (only need to do this once technically, but this is fine)\n    const autocompleteService = new window.google.maps.places.AutocompleteService();\n\n    // 3. Ask for predictions\n    autocompleteService.getPlacePredictions(\n      {\n        input: query,\n        componentRestrictions: { country: 'us' }, // Limit to USA\n        types: ['geocode', 'establishment'], // Search addresses and businesses\n      },\n      (results, status) => {\n        if (status === window.google.maps.places.PlacesServiceStatus.OK && results) {\n          setPredictions(results);\n        } else {\n          setPredictions([]);\n        }\n      }\n    );\n  }, [query]);\n\n  return predictions;\n};"],"names":[],"mappings":";;;;AAAA;;AAKO,MAAM,wBAAwB,CAAC;IACpC,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,6NAAQ,EAA8C,EAAE;IAE9F,IAAA,8NAAS,EAAC;QACR,8DAA8D;QAC9D,IAAI,CAAC,SAAS,MAAM,MAAM,GAAG,KAAK,CAAC,OAAO,MAAM,IAAI,CAAC,OAAO,MAAM,CAAC,IAAI,IAAI,CAAC,OAAO,MAAM,CAAC,IAAI,CAAC,MAAM,EAAE;YACrG,eAAe,EAAE;YACjB;QACF;QAEA,kFAAkF;QAClF,MAAM,sBAAsB,IAAI,OAAO,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,mBAAmB;QAE7E,yBAAyB;QACzB,oBAAoB,mBAAmB,CACrC;YACE,OAAO;YACP,uBAAuB;gBAAE,SAAS;YAAK;YACvC,OAAO;gBAAC;gBAAW;aAAgB;QACrC,GACA,CAAC,SAAS;YACR,IAAI,WAAW,OAAO,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,mBAAmB,CAAC,EAAE,IAAI,SAAS;gBAC1E,eAAe;YACjB,OAAO;gBACL,eAAe,EAAE;YACnB;QACF;IAEJ,GAAG;QAAC;KAAM;IAEV,OAAO;AACT"}},
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///home/parker/winterproject/frontend/src/app/searchBar.tsx"],"sourcesContent":["'use client';\nimport React, { useState, useEffect, useRef } from 'react';\nimport { usePlacesAutocomplete } from '@/hooks/usePlacesAutocomplete';\n\ninterface SearchBarProps {\n  onSearch: (placeId: string, description: string) => void; \n  // Note: We are now passing the Google \"placeId\" instead of just text\n}\n\nexport default function SearchBar({ onSearch }: SearchBarProps) {\n  const [query, setQuery] = useState('');\n  const [isOpen, setIsOpen] = useState(false);\n  \n  // 1. Get suggestions from our custom hook\n  const predictions = usePlacesAutocomplete(query);\n  const wrapperRef = useRef<HTMLDivElement>(null);\n\n  // 2. Handle clicking outside to close the dropdown\n  useEffect(() => {\n    function handleClickOutside(event: MouseEvent) {\n      if (wrapperRef.current && !wrapperRef.current.contains(event.target as Node)) {\n        setIsOpen(false);\n      }\n    }\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\n  }, []);\n\n  const handleSelect = (placeId: string, description: string) => {\n    setQuery(description);\n    setIsOpen(false);\n    onSearch(placeId, description); // Send the ID back to the map to get coordinates\n  };\n\n  return (\n    <div ref={wrapperRef} className=\"relative mb-6 z-50\">\n      \n      {/* INPUT FIELD */}\n      <div className=\"relative\">\n        <input \n          type=\"text\" \n          placeholder=\"Search city, zip, or address...\" \n          className=\"w-full pl-4 pr-10 py-3 rounded-full bg-gray-100 border-transparent focus:bg-white focus:border-gray-300 focus:ring-0 transition-all text-sm outline-none shadow-sm\"\n          value={query}\n          onChange={(e) => {\n            setQuery(e.target.value);\n            setIsOpen(true);\n          }}\n          onFocus={() => setIsOpen(true)} \n        />\n        <div className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400\">\n          üîç\n        </div>\n      </div>\n\n      {/* DROPDOWN SUGGESTIONS */}\n      {isOpen && predictions.length > 0 && (\n        <ul className=\"absolute w-full mt-2 bg-white rounded-xl shadow-xl border border-gray-100 overflow-hidden z-50 max-h-60 overflow-y-auto\">\n          {predictions.map((prediction) => (\n            <li \n              key={prediction.place_id}\n              onClick={() => handleSelect(prediction.place_id, prediction.description)}\n              className=\"px-4 py-3 hover:bg-blue-50 cursor-pointer text-sm text-gray-700 border-b last:border-b-0 border-gray-50 flex items-center gap-2\"\n            >\n              <span className=\"text-gray-400 text-xs\">üìç</span>\n              {/* Highlight the main text (e.g., \"Starbucks\") vs secondary text (e.g., \"Main St, NY\") */}\n              <div className=\"flex flex-col\">\n                 <span className=\"font-medium text-gray-900\">\n                   {prediction.structured_formatting.main_text}\n                 </span>\n                 <span className=\"text-xs text-gray-500\">\n                   {prediction.structured_formatting.secondary_text}\n                 </span>\n              </div>\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n}"],"names":[],"mappings":";;;;;AACA;AACA;AAFA;;;;AASe,SAAS,UAAU,EAAE,QAAQ,EAAkB;IAC5D,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,6NAAQ,EAAC;IACnC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,6NAAQ,EAAC;IAErC,0CAA0C;IAC1C,MAAM,cAAc,IAAA,0KAAqB,EAAC;IAC1C,MAAM,aAAa,IAAA,2NAAM,EAAiB;IAE1C,mDAAmD;IACnD,IAAA,8NAAS,EAAC;QACR,SAAS,mBAAmB,KAAiB;YAC3C,IAAI,WAAW,OAAO,IAAI,CAAC,WAAW,OAAO,CAAC,QAAQ,CAAC,MAAM,MAAM,GAAW;gBAC5E,UAAU;YACZ;QACF;QACA,SAAS,gBAAgB,CAAC,aAAa;QACvC,OAAO,IAAM,SAAS,mBAAmB,CAAC,aAAa;IACzD,GAAG,EAAE;IAEL,MAAM,eAAe,CAAC,SAAiB;QACrC,SAAS;QACT,UAAU;QACV,SAAS,SAAS,cAAc,iDAAiD;IACnF;IAEA,qBACE,0PAAC;QAAI,KAAK;QAAY,WAAU;;0BAG9B,0PAAC;gBAAI,WAAU;;kCACb,0PAAC;wBACC,MAAK;wBACL,aAAY;wBACZ,WAAU;wBACV,OAAO;wBACP,UAAU,CAAC;4BACT,SAAS,EAAE,MAAM,CAAC,KAAK;4BACvB,UAAU;wBACZ;wBACA,SAAS,IAAM,UAAU;;;;;;kCAE3B,0PAAC;wBAAI,WAAU;kCAAoE;;;;;;;;;;;;YAMpF,UAAU,YAAY,MAAM,GAAG,mBAC9B,0PAAC;gBAAG,WAAU;0BACX,YAAY,GAAG,CAAC,CAAC,2BAChB,0PAAC;wBAEC,SAAS,IAAM,aAAa,WAAW,QAAQ,EAAE,WAAW,WAAW;wBACvE,WAAU;;0CAEV,0PAAC;gCAAK,WAAU;0CAAwB;;;;;;0CAExC,0PAAC;gCAAI,WAAU;;kDACZ,0PAAC;wCAAK,WAAU;kDACb,WAAW,qBAAqB,CAAC,SAAS;;;;;;kDAE7C,0PAAC;wCAAK,WAAU;kDACb,WAAW,qBAAqB,CAAC,cAAc;;;;;;;;;;;;;uBAXhD,WAAW,QAAQ;;;;;;;;;;;;;;;;AAoBtC"}},
    {"offset": {"line": 181, "column": 0}, "map": {"version":3,"sources":["file:///home/parker/winterproject/frontend/src/app/sidebar.tsx"],"sourcesContent":["'use client';\nimport React from 'react';\nimport SearchBar from './searchBar'; // <--- Make sure this path matches where you saved SearchBar.tsx\n\ninterface SidebarProps {\n  isPinMode: boolean;\n  onPinClick: () => void;\n  radius: number;\n  onRadiusChange: (val: number) => void;\n  hasActivePin: boolean;\n  onDeletePin: () => void;\n  isConfirmMode: boolean;\n  onConfirmClick: () => void;\n  \n  // Category Props\n  category: string;\n  onCategoryChange: (val: string) => void;\n\n  // Demand Data Props\n  demandSummary: Record<string, number> | null;\n  onUpvote: (categoryName: string) => void;\n\n  // Search Prop\n  onSearch: (query: string) => void;\n}\n\nexport default function Sidebar({ \n  isPinMode, \n  onPinClick, \n  radius, \n  onRadiusChange, \n  hasActivePin, \n  onDeletePin,\n  isConfirmMode,\n  onConfirmClick,\n  category,\n  onCategoryChange,\n  demandSummary,\n  onUpvote,\n  onSearch \n}: SidebarProps) {\n\n  return (\n    <aside className=\"w-[350px] h-full bg-white border-r shadow-lg flex flex-col p-6 z-10\">\n      \n      {/* 1. SEARCH BAR (Now a clean, separate component) */}\n      <SearchBar onSearch={onSearch} />\n\n      {/* HEADER */}\n      <div className=\"mb-6\">\n        <h2 className=\"text-2xl font-bold text-gray-800\">Make a Wish</h2>\n        <p className=\"text-sm text-gray-500 mt-1\">Tell landlords what this area needs.</p>\n      </div>\n\n      {/* SCROLLABLE CONTENT */}\n      <div className=\"flex-1 overflow-y-auto space-y-8 pr-2 scrollbar-thin scrollbar-thumb-gray-200\">\n        \n        {/* 2. CATEGORY SELECTION */}\n        <div className=\"flex flex-col space-y-2\">\n            <label className=\"text-sm font-semibold text-gray-700\">What is missing here?</label>\n            \n            {/* Free Text Input */}\n            <input \n                type=\"text\"\n                value={category}\n                onChange={(e) => onCategoryChange(e.target.value)}\n                placeholder=\"Type anything (e.g. Jazz Club)...\"\n                className=\"w-full p-3 border border-gray-200 rounded-xl bg-gray-50 text-gray-800 focus:ring-2 focus:ring-blue-500 outline-none transition-all\"\n            />\n\n            {/* Quick Select Chips */}\n            <div className=\"flex flex-wrap gap-2 mt-2\">\n                {['‚òï Coffee Shop', 'üí™ Gym', 'ü•¶ Grocery'].map((item) => (\n                    <button\n                        key={item}\n                        type=\"button\"\n                        onClick={() => onCategoryChange(item)}\n                        className=\"text-xs bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-1 rounded-full transition-colors\"\n                    >\n                        {item}\n                    </button>\n                ))}\n            </div>\n        </div>\n\n        {/* 3. THE RADIUS SLIDER */}\n        <div className=\"flex flex-col space-y-4\">\n          <div className=\"flex justify-between items-center\">\n            <label className=\"text-sm font-semibold text-gray-700\">How far would you travel?</label>\n            <span className=\"bg-blue-100 text-blue-700 px-2 py-1 rounded text-xs font-bold\">\n              {radius} miles\n            </span>\n          </div>\n          <input \n            type=\"range\" \n            min=\"0.5\" \n            max=\"5\" \n            step=\"0.5\"\n            value={radius}\n            onChange={(e) => onRadiusChange(Number(e.target.value))}\n            className=\"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-600\"\n          />\n          <div className=\"flex justify-between text-[10px] text-gray-400 px-1\">\n            <span>Walking (0.5mi)</span>\n            <span>Driving (5mi)</span>\n          </div>\n        </div>\n\n        <hr className=\"border-gray-100\" />\n\n        {/* 4. ACTION BUTTONS */}\n        <div className=\"flex flex-col gap-3\">\n          {!isConfirmMode ? (\n            <button \n              onClick={onPinClick}\n              className={`w-full py-3 rounded-xl font-bold shadow-md transition-all flex items-center justify-center gap-2 ${\n                isPinMode ? 'bg-gray-400 text-white cursor-not-allowed' : 'bg-blue-600 text-white hover:bg-blue-700'\n              }`}\n              disabled={isPinMode}\n            >\n              {isPinMode ? 'Click on Map...' : 'üìç Drop Pin'}\n            </button>\n          ) : (\n            <button \n              onClick={onConfirmClick}\n              className=\"w-full py-3 rounded-xl font-bold bg-green-600 text-white shadow-md hover:bg-green-700 transition-all flex items-center justify-center gap-2\"\n            >\n              <span>‚úÖ</span> Confirm Wish\n            </button>\n          )}\n\n          {hasActivePin && (\n            <button \n              onClick={onDeletePin} \n              className=\"w-full py-2 rounded-xl font-semibold text-red-500 border border-red-200 hover:bg-red-50 transition-colors text-sm\"\n            >\n              Cancel\n            </button>\n          )}\n        </div>\n\n        {/* 5. RESULTS / SUGGESTIONS */}\n        <div className=\"border-t pt-4\">\n          {demandSummary ? (\n            <div className=\"flex flex-col animate-in fade-in slide-in-from-bottom-2 duration-300\">\n              <div className=\"flex justify-between items-center mb-3\">\n                <h3 className=\"text-sm font-bold text-gray-700 uppercase tracking-wider\">\n                  Local Demand\n                </h3>\n                <span className=\"text-[10px] bg-gray-100 text-gray-500 px-2 py-1 rounded-full\">\n                  Live Data\n                </span>\n              </div>\n              \n              <div className=\"space-y-3\">\n                {Object.entries(demandSummary)\n                  .sort(([, a], [, b]) => b - a)\n                  .map(([cat, count]) => (\n                    <div key={cat} className=\"flex justify-between items-center p-3 bg-blue-50 rounded-xl border border-blue-100 hover:border-blue-300 transition-colors group\">\n                      <div className=\"flex flex-col\">\n                          <span className=\"text-sm font-medium text-gray-800\">{cat}</span>\n                          <span className=\"text-[10px] text-gray-500\">\n                             {count} {count === 1 ? 'person wants' : 'people want'} this\n                          </span>\n                      </div>\n                      <button \n                          onClick={() => onUpvote(cat)}\n                          className=\"bg-white text-blue-600 hover:bg-blue-600 hover:text-white border border-blue-200 p-2 rounded-full shadow-sm transition-all active:scale-95 flex items-center justify-center\"\n                          title=\"I want this too!\"\n                      >\n                          <span className=\"text-xs font-bold\">üëç +1</span>\n                      </button>\n                    </div>\n                  ))}\n                \n                {Object.keys(demandSummary).length === 0 && (\n                  <p className=\"text-sm text-gray-400 text-center mt-4\">No wishes found here yet.</p>\n                )}\n              </div>\n            </div>\n          ) : (\n            <div className=\"flex flex-col items-center justify-center text-center text-gray-400 border-2 border-dashed border-gray-100 rounded-xl px-4 py-8\">\n              <p className=\"text-xs\">\n                {isConfirmMode \n                  ? \"Drag pin to exact spot.\" \n                  : \"Click a building to upvote wishes.\"}\n              </p>\n            </div>\n          )}\n        </div>\n\n      </div>\n    </aside>\n  );\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 548, "column": 0}, "map": {"version":3,"sources":["file:///home/parker/winterproject/frontend/src/app/map.tsx"],"sourcesContent":["'use client';\nimport React, { useEffect, useRef, useState } from 'react';\nimport { MarkerClusterer, SuperClusterAlgorithm } from \"@googlemaps/markerclusterer\";\n\nconst GOOGLE_MAPS_API_KEY = process.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY || '';\n\ninterface Property {\n  id: number;\n  address: string;\n  price: number;\n  latitude: number;\n  longitude: number;\n  description: string;\n  squareFeet: number;\n}\n\ninterface MapProps {\n  isPinMode: boolean;\n  setPinMode: (value: boolean) => void;\n  searchRadius: number;\n  hasActivePin: boolean;\n  setHasActivePin: (value: boolean) => void;\n  isConfirmMode: boolean;\n  setIsConfirmMode: (value: boolean) => void;\n  onPinPositionChange: (lat: number, lng: number) => void;\n  properties: Property[]; \n  onPropertyClick?: (lat: number, lng: number) => void;\n  onMapClick?: (lat: number, lng: number) => void;\n  // This is the crucial new prop\n  onBoundsChange?: (bounds: { minLat: number, maxLat: number, minLng: number, maxLng: number }) => void;\n  searchLocation?: string;\n}\n\nexport default function GoogleMapsComponent({ \n  isPinMode, \n  setPinMode, \n  searchRadius,\n  hasActivePin,\n  setHasActivePin,\n  isConfirmMode,\n  setIsConfirmMode,\n  onPinPositionChange,\n  properties, \n  onPropertyClick, \n  onMapClick,\n  onBoundsChange, // <--- We use this to tell the parent \"I moved!\"\n  searchLocation \n}: MapProps) {\n  const mapRef = useRef<HTMLDivElement>(null);\n  const mapInstanceRef = useRef<google.maps.Map | null>(null);\n  const clustererRef = useRef<MarkerClusterer | null>(null);\n  \n  // Refs for \"Make a Wish\" Pin\n  const currentMarkerRef = useRef<any>(null); \n  const currentCircleRef = useRef<google.maps.Circle | null>(null);\n  \n  // Ref for \"Landlord\" Selection Marker\n  const selectionMarkerRef = useRef<google.maps.Marker | null>(null);\n\n  const [isLoaded, setIsLoaded] = useState(false);\n\n  // 1. Load Script\n  useEffect(() => {\n    if (window.google?.maps) { setIsLoaded(true); return; }\n    const script = document.createElement('script');\n    script.src = `https://maps.googleapis.com/maps/api/js?key=${GOOGLE_MAPS_API_KEY}&v=weekly&libraries=marker,places,geometry`; \n    script.async = true;\n    script.onload = () => setIsLoaded(true);\n    document.head.appendChild(script);\n  }, []);\n\n  // 2. Initialize Map & Setup \"Idle\" Listener\n  useEffect(() => {\n    if (!isLoaded || !mapRef.current || mapInstanceRef.current) return;\n    \n    const map = new google.maps.Map(mapRef.current, {\n      zoom: 13,\n      center: { lat: 40.5795, lng: -74.1502 }, // Centered on Staten Island/NYC\n      mapId: 'DEMO_MAP_ID', \n      disableDefaultUI: true, \n      zoomControl: true,\n    });\n    \n    mapInstanceRef.current = map;\n\n    // --- THIS IS THE KEY PART ---\n    // When the user stops dragging/zooming, we calculate the visible box\n    map.addListener('idle', () => {\n        if (onBoundsChange) {\n            const bounds = map.getBounds();\n            if (bounds) {\n                const ne = bounds.getNorthEast(); // Top Right\n                const sw = bounds.getSouthWest(); // Bottom Left\n                \n                onBoundsChange({\n                    maxLat: ne.lat(),\n                    maxLng: ne.lng(),\n                    minLat: sw.lat(),\n                    minLng: sw.lng()\n                });\n            }\n        }\n    });\n\n  }, [isLoaded, onBoundsChange]);\n\n  // 3. Handle Search Teleporting\n  useEffect(() => {\n    if (!searchLocation || !mapInstanceRef.current || !window.google) return;\n    const geocoder = new google.maps.Geocoder();\n    geocoder.geocode({ address: searchLocation }, (results, status) => {\n        if (status === 'OK' && results && results[0]) {\n            const location = results[0].geometry.location;\n            mapInstanceRef.current?.panTo(location);\n            mapInstanceRef.current?.setZoom(14);\n        }\n    });\n  }, [searchLocation, isLoaded]);\n\n  // 4. Render Properties (Clustering)\n  useEffect(() => {\n    if (!mapInstanceRef.current || !window.google) return;\n    \n    // Clear old clusters\n    if (clustererRef.current) {\n        clustererRef.current.clearMarkers();\n        clustererRef.current = null;\n    }\n\n    const loadMarkers = async () => {\n        const { AdvancedMarkerElement } = await google.maps.importLibrary(\"marker\") as google.maps.MarkerLibrary;\n        const newMarkers: google.maps.marker.AdvancedMarkerElement[] = [];\n\n        // Safety check to handle empty data gracefully\n        (properties || []).forEach((prop) => {\n            const tag = document.createElement('div');\n            // Custom styling for the pins\n            tag.className = 'bg-blue-600 text-white px-2 py-1 rounded shadow-md text-xs font-bold border border-white transform hover:scale-110 transition-transform cursor-pointer';\n            const size = prop.squareFeet ? prop.squareFeet.toLocaleString() : '?';\n            tag.innerText = `${size} sf`;\n            \n            const marker = new AdvancedMarkerElement({\n                position: { lat: prop.latitude, lng: prop.longitude },\n                content: tag,\n                title: prop.address\n            });\n\n            marker.addListener(\"click\", () => {\n                if (onPropertyClick) onPropertyClick(prop.latitude, prop.longitude);\n                mapInstanceRef.current?.panTo({ lat: prop.latitude, lng: prop.longitude });\n            });\n            newMarkers.push(marker);\n        });\n\n        clustererRef.current = new MarkerClusterer({ \n            map: mapInstanceRef.current, \n            markers: newMarkers,\n            algorithm: new SuperClusterAlgorithm({ maxZoom: 15, radius: 50 }) \n        });\n    };\n    loadMarkers();\n  }, [properties, isLoaded, onPropertyClick]); \n\n  // 5. Update Circle Radius\n  useEffect(() => {\n    if (currentCircleRef.current) {\n      const meters = searchRadius * 1609.34;\n      currentCircleRef.current.setRadius(meters);\n    }\n  }, [searchRadius]);\n\n  // 6. Clear Pin if Cancelled\n  useEffect(() => {\n    if (!hasActivePin) {\n      if (currentMarkerRef.current) { currentMarkerRef.current.map = null; currentMarkerRef.current = null; }\n      if (currentCircleRef.current) { currentCircleRef.current.setMap(null); currentCircleRef.current = null; }\n    }\n  }, [hasActivePin]);\n\n  // 7. Toggle Draggable\n  useEffect(() => {\n    if (currentMarkerRef.current) {\n      currentMarkerRef.current.gmpDraggable = isConfirmMode;\n    }\n  }, [isConfirmMode]);\n\n  // 8. PIN MODE LOGIC\n  useEffect(() => {\n    if (!mapInstanceRef.current || !isPinMode) return;\n    const map = mapInstanceRef.current;\n    map.setOptions({ draggableCursor: 'crosshair' });\n\n    const clickListener = map.addListener('click', async (e: google.maps.MapMouseEvent) => {\n      if (!e.latLng) return;\n      onPinPositionChange(e.latLng.lat(), e.latLng.lng());\n\n      if (currentMarkerRef.current) currentMarkerRef.current.map = null;\n      if (currentCircleRef.current) currentCircleRef.current.setMap(null);\n\n      const { AdvancedMarkerElement } = await google.maps.importLibrary(\"marker\") as google.maps.MarkerLibrary;\n      const pinElement = document.createElement('div');\n      pinElement.className = 'bg-white text-blue-600 px-3 py-1 rounded-full border-2 border-blue-600 font-bold shadow-lg text-sm cursor-grab';\n      pinElement.innerText = 'New Wish';\n\n      const newMarker = new AdvancedMarkerElement({\n        map,\n        position: e.latLng,\n        content: pinElement,\n        gmpDraggable: true, \n      });\n\n      const newCircle = new google.maps.Circle({\n        map,\n        center: e.latLng,\n        radius: searchRadius * 1609.34,\n        fillColor: \"#1a73e8\",\n        fillOpacity: 0.2,\n        strokeColor: \"#1a73e8\",\n        strokeWeight: 1,\n        clickable: false,\n      });\n\n      newMarker.addListener('drag', () => {\n        const newPos = newMarker.position as google.maps.LatLng;\n        if (newPos) {\n          newCircle.setCenter(newPos);\n          if(typeof newPos.lat === 'function') onPinPositionChange(newPos.lat(), newPos.lng());\n        }\n      });\n      newMarker.addListener('dragend', () => {\n          const newPos = newMarker.position as google.maps.LatLng;\n          if(newPos && typeof newPos.lat === 'function') onPinPositionChange(newPos.lat(), newPos.lng());\n      });\n\n      currentMarkerRef.current = newMarker;\n      currentCircleRef.current = newCircle;\n      setHasActivePin(true);\n      setIsConfirmMode(true); \n      setPinMode(false);\n      map.setOptions({ draggableCursor: null });\n    });\n    return () => google.maps.event.removeListener(clickListener);\n  }, [isPinMode, searchRadius, setPinMode, setHasActivePin, setIsConfirmMode, onPinPositionChange]);\n\n  // 9. GENERIC CLICK LISTENER (FIXED)\n  useEffect(() => {\n    if (!mapInstanceRef.current || isPinMode) return; \n    \n    const map = mapInstanceRef.current;\n    const listener = map.addListener('click', (e: google.maps.MapMouseEvent) => {\n      if (onMapClick && e.latLng) {\n        onMapClick(e.latLng.lat(), e.latLng.lng());\n        \n        if (selectionMarkerRef.current) {\n            selectionMarkerRef.current.setMap(null);\n        }\n\n        selectionMarkerRef.current = new google.maps.Marker({ \n          position: e.latLng, \n          map: map, \n          icon: { \n            path: google.maps.SymbolPath.CIRCLE, \n            scale: 7, \n            fillColor: \"black\", \n            fillOpacity: 1, \n            strokeWeight: 2, \n            strokeColor: \"white\", \n          } \n        });\n      }\n    });\n    return () => google.maps.event.removeListener(listener);\n  }, [isPinMode, onMapClick, isLoaded]);\n\n  return (\n    <div className=\"w-full h-full relative\">\n      <div ref={mapRef} className=\"w-full h-full\" />\n    </div>\n  );\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 845, "column": 0}, "map": {"version":3,"sources":["file:///home/parker/winterproject/frontend/src/app/topbar.tsx"],"sourcesContent":["'use client';\nimport { useEffect } from 'react';\nimport Link from 'next/link';\nimport { usePathname } from 'next/navigation';\n\nexport default function Topbar() {\n  const pathname = usePathname();\n\n  useEffect(() => {\n    console.log('Topbar module loaded');\n    return () => {\n      console.log('Topbar module unloaded');\n    };\n  }, []);\n\n  const isActive = (href: string) => {\n    if (!pathname) return false;\n    if (href === '/') return pathname === '/';\n    return pathname === href || pathname.startsWith(href + '/');\n  };\n\n  const linkStyle = (href: string) => ({\n    margin: '0 10px',\n    padding: '6px 8px',\n    borderRadius: '4px',\n    backgroundColor: isActive(href) ? '#cfe8ff' : 'transparent',\n    color: isActive(href) ? '#003366' : 'inherit',\n    textDecoration: 'none'\n  });\n\n  return (\n    <div style={{ display: 'flex', justifyContent: 'space-between', padding: '10px', backgroundColor: '#f0f0f0' }}>\n      <div>\n        <Link href=\"/\" style={linkStyle('/')}>Home</Link>\n        <Link href=\"/retail-space\" style={linkStyle('/retail-space')}>Retail Space</Link>\n        <Link href=\"/contact\" style={linkStyle('/contact')}>Contact</Link>\n      </div>\n      <div>\n        <Link href=\"/login\" style={linkStyle('/login')}>Login</Link>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAHA;;;;;AAKe,SAAS;IACtB,MAAM,WAAW,IAAA,6JAAW;IAE5B,IAAA,8NAAS,EAAC;QACR,QAAQ,GAAG,CAAC;QACZ,OAAO;YACL,QAAQ,GAAG,CAAC;QACd;IACF,GAAG,EAAE;IAEL,MAAM,WAAW,CAAC;QAChB,IAAI,CAAC,UAAU,OAAO;QACtB,IAAI,SAAS,KAAK,OAAO,aAAa;QACtC,OAAO,aAAa,QAAQ,SAAS,UAAU,CAAC,OAAO;IACzD;IAEA,MAAM,YAAY,CAAC,OAAiB,CAAC;YACnC,QAAQ;YACR,SAAS;YACT,cAAc;YACd,iBAAiB,SAAS,QAAQ,YAAY;YAC9C,OAAO,SAAS,QAAQ,YAAY;YACpC,gBAAgB;QAClB,CAAC;IAED,qBACE,0PAAC;QAAI,OAAO;YAAE,SAAS;YAAQ,gBAAgB;YAAiB,SAAS;YAAQ,iBAAiB;QAAU;;0BAC1G,0PAAC;;kCACC,0PAAC,mLAAI;wBAAC,MAAK;wBAAI,OAAO,UAAU;kCAAM;;;;;;kCACtC,0PAAC,mLAAI;wBAAC,MAAK;wBAAgB,OAAO,UAAU;kCAAkB;;;;;;kCAC9D,0PAAC,mLAAI;wBAAC,MAAK;wBAAW,OAAO,UAAU;kCAAa;;;;;;;;;;;;0BAEtD,0PAAC;0BACC,cAAA,0PAAC,mLAAI;oBAAC,MAAK;oBAAS,OAAO,UAAU;8BAAW;;;;;;;;;;;;;;;;;AAIxD"}},
    {"offset": {"line": 948, "column": 0}, "map": {"version":3,"sources":["file:///home/parker/winterproject/frontend/src/app/page.tsx"],"sourcesContent":["'use client';\nimport React, { useState, useCallback } from 'react';\nimport Sidebar from './sidebar';\nimport GoogleMapsComponent from './map';\nimport Topbar from './topbar';\n\n// Define Types\ninterface Property {\n  id: number;\n  address: string;\n  price: number;\n  latitude: number;\n  longitude: number;\n  description: string;\n  squareFeet: number;\n}\n\nexport default function Home() {\n  // UI State\n  const [isPinMode, setIsPinMode] = useState<boolean>(false);\n  const [isConfirmMode, setIsConfirmMode] = useState<boolean>(false);\n  const [hasActivePin, setHasActivePin] = useState<boolean>(false);\n  \n  // Data Inputs\n  const [radius, setRadius] = useState<number>(1); \n  const [category, setCategory] = useState<string>(\"Coffee Shop\"); \n\n  // --- LOCATION STATE ---\n  // 1. For the PIN (Making a wish) - Object {lat, lng}\n  const [pinLocation, setPinLocation] = useState<{lat: number, lng: number} | null>(null);\n  \n  // 2. For the SEARCH BAR (Teleporting) - String \"Miami\"\n  const [searchString, setSearchString] = useState<string>(\"\"); \n\n  // 3. For the SIDEBAR (Viewing demand)\n  const [viewingLocation, setViewingLocation] = useState<{lat: number, lng: number} | null>(null);\n  \n  // Data State\n  const [properties, setProperties] = useState<Property[]>([]); \n  const [demandSummary, setDemandSummary] = useState<Record<string, number> | null>(null);\n\n  // --- Fetch based on Viewport (Optimized with useCallback) ---\n  const fetchProperties = useCallback((bounds?: { minLat: number, maxLat: number, minLng: number, maxLng: number }) => {\n    let url = 'http://localhost:8080/api/properties';\n\n    if (bounds) {\n        const query = new URLSearchParams({\n            minLat: bounds.minLat.toString(),\n            maxLat: bounds.maxLat.toString(),\n            minLng: bounds.minLng.toString(),\n            maxLng: bounds.maxLng.toString(),\n        });\n        url += `?${query.toString()}`;\n    }\n\n    // console.log(\"Fetching from:\", url); // Uncomment for debugging\n    fetch(url)\n      .then(res => res.json())\n      .then(data => setProperties(data))\n      .catch(err => console.error(\"Error fetching properties:\", err));\n  }, []); // Empty dependency array = function never changes identity (Fast!)\n\n  // --- HELPER: Fetch Demand for ANY Location ---\n  const fetchDemand = (lat: number, lng: number) => {\n    fetch(`http://localhost:8080/demand-summary?lat=${lat}&lon=${lng}`)\n        .then(res => res.json())\n        .then(data => setDemandSummary(data))\n        .catch(err => console.error(\"Error fetching demand:\", err));\n  };\n\n  // --- HANDLER 1: CLICK A PROPERTY (Building) ---\n  const handlePropertyClick = (lat: number, lng: number) => {\n    setViewingLocation({ lat, lng });\n    setHasActivePin(false);\n    setIsConfirmMode(false);\n    setIsPinMode(false);\n    fetchDemand(lat, lng);\n  };\n\n  // --- HANDLER 2: CLICK MAP (Landlord Mode - Empty Space) ---\n  const handleMapClick = (lat: number, lng: number) => {\n    // Only allow clicking empty space if we aren't trying to drop a pin\n    if (isPinMode || isConfirmMode) return;\n\n    setViewingLocation({ lat, lng });\n    setHasActivePin(false);\n    fetchDemand(lat, lng);\n  };\n\n  // --- HANDLER 3: UPVOTE ---\n  const handleUpvote = (categoryToUpvote: string) => {\n    if (!viewingLocation) return;\n\n    fetch('http://localhost:8080/wish', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n            category: categoryToUpvote,\n            latitude: viewingLocation.lat,\n            longitude: viewingLocation.lng,\n            radiusMeters: 400\n        })\n    })\n    .then(res => res.json())\n    .then(() => {\n        // Refresh demand to see the new vote immediately\n        handlePropertyClick(viewingLocation.lat, viewingLocation.lng);\n    })\n    .catch(err => alert(\"Error upvoting: \" + err));\n  };\n\n  // --- HANDLER 4: CONFIRM NEW WISH ---\n  const handleConfirm = () => {\n    if (!pinLocation) {\n        alert(\"Error: No location selected.\");\n        return;\n    }\n\n    const radiusMeters = radius * 1609.34; \n\n    fetch('http://localhost:8080/wish', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n            category: category,\n            latitude: pinLocation.lat,\n            longitude: pinLocation.lng,\n            radiusMeters: radiusMeters\n        })\n    })\n    .then(res => {\n        if (!res.ok) throw new Error(\"Backend failed\");\n        return res.json();\n    })\n    .then(() => {\n        setHasActivePin(false);\n        setIsConfirmMode(false); \n        setPinLocation(null);\n        setDemandSummary(null); \n        alert(\"Wish saved successfully!\");\n    })\n    .catch(err => {\n        console.error(\"Error saving wish:\", err);\n        alert(\"Failed to save wish.\");\n    });\n  };\n\n  return (\n    <div className=\"flex flex-col h-screen w-full\">\n      <Topbar />\n      <div className=\"flex flex-row flex-1 overflow-hidden\">\n        <Sidebar \n          isPinMode={isPinMode}\n          isConfirmMode={isConfirmMode}\n          onPinClick={() => setIsPinMode(true)}\n          onConfirmClick={handleConfirm}\n          radius={radius}\n          onRadiusChange={setRadius}\n          category={category}\n          onCategoryChange={setCategory}\n          hasActivePin={hasActivePin}\n          onDeletePin={() => {\n            setHasActivePin(false);\n            setIsConfirmMode(false);\n            setPinLocation(null);\n            setDemandSummary(null);\n            setViewingLocation(null);\n          }}\n          demandSummary={demandSummary}\n          onUpvote={handleUpvote}\n          onSearch={(query) => setSearchString(query)}\n        />\n\n        <main className=\"flex-1 h-full relative\">\n          <GoogleMapsComponent \n            // 1. Viewport Filtering\n            properties={properties} \n            onBoundsChange={fetchProperties}\n\n            // 2. Click Handling\n            onPropertyClick={handlePropertyClick}\n            onMapClick={handleMapClick} // <--- Added for Landlord Mode\n\n            // 3. Pin & UI State\n            isPinMode={isPinMode}\n            setPinMode={setIsPinMode}\n            isConfirmMode={isConfirmMode}\n            setIsConfirmMode={setIsConfirmMode}\n            searchRadius={radius}\n            hasActivePin={hasActivePin}\n            setHasActivePin={setHasActivePin}\n            onPinPositionChange={(lat, lng) => setPinLocation({ lat, lng })}\n            searchLocation={searchString}\n          />\n        </main>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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"}}]
}