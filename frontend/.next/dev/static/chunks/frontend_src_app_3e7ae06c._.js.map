{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/parker/winterproject/frontend/src/app/topbar.tsx"],"sourcesContent":["'use client';\nimport { useEffect } from 'react';\nimport Link from 'next/link';\nimport { usePathname } from 'next/navigation';\n\nexport default function Topbar() {\n  const pathname = usePathname();\n\n  useEffect(() => {\n    console.log('Topbar module loaded');\n    return () => {\n      console.log('Topbar module unloaded');\n    };\n  }, []);\n\n  const isActive = (href: string) => {\n    if (!pathname) return false;\n    if (href === '/') return pathname === '/';\n    return pathname === href || pathname.startsWith(href + '/');\n  };\n\n  const linkStyle = (href: string) => ({\n    margin: '0 10px',\n    padding: '6px 8px',\n    borderRadius: '4px',\n    backgroundColor: isActive(href) ? '#cfe8ff' : 'transparent',\n    color: isActive(href) ? '#003366' : 'inherit',\n    textDecoration: 'none'\n  });\n\n  return (\n    <div style={{ display: 'flex', justifyContent: 'space-between', padding: '10px', backgroundColor: '#f0f0f0' }}>\n      <div>\n        <Link href=\"/\" style={linkStyle('/')}>Home</Link>\n        <Link href=\"/retail-space\" style={linkStyle('/retail-space')}>Retail Space</Link>\n        <Link href=\"/contact\" style={linkStyle('/contact')}>Contact</Link>\n      </div>\n      <div>\n        <Link href=\"/login\" style={linkStyle('/login')}>Login</Link>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":";;;;;AACA;AACA;AACA;;;AAHA;;;;AAKe,SAAS;;IACtB,MAAM,WAAW,IAAA,gKAAW;IAE5B,IAAA,sLAAS;4BAAC;YACR,QAAQ,GAAG,CAAC;YACZ;oCAAO;oBACL,QAAQ,GAAG,CAAC;gBACd;;QACF;2BAAG,EAAE;IAEL,MAAM,WAAW,CAAC;QAChB,IAAI,CAAC,UAAU,OAAO;QACtB,IAAI,SAAS,KAAK,OAAO,aAAa;QACtC,OAAO,aAAa,QAAQ,SAAS,UAAU,CAAC,OAAO;IACzD;IAEA,MAAM,YAAY,CAAC,OAAiB,CAAC;YACnC,QAAQ;YACR,SAAS;YACT,cAAc;YACd,iBAAiB,SAAS,QAAQ,YAAY;YAC9C,OAAO,SAAS,QAAQ,YAAY;YACpC,gBAAgB;QAClB,CAAC;IAED,qBACE,yMAAC;QAAI,OAAO;YAAE,SAAS;YAAQ,gBAAgB;YAAiB,SAAS;YAAQ,iBAAiB;QAAU;;0BAC1G,yMAAC;;kCACC,yMAAC,sLAAI;wBAAC,MAAK;wBAAI,OAAO,UAAU;kCAAM;;;;;;kCACtC,yMAAC,sLAAI;wBAAC,MAAK;wBAAgB,OAAO,UAAU;kCAAkB;;;;;;kCAC9D,yMAAC,sLAAI;wBAAC,MAAK;wBAAW,OAAO,UAAU;kCAAa;;;;;;;;;;;;0BAEtD,yMAAC;0BACC,cAAA,yMAAC,sLAAI;oBAAC,MAAK;oBAAS,OAAO,UAAU;8BAAW;;;;;;;;;;;;;;;;;AAIxD;GArCwB;;QACL,gKAAW;;;KADN"}},
    {"offset": {"line": 124, "column": 0}, "map": {"version":3,"sources":["file:///home/parker/winterproject/frontend/src/app/map.tsx"],"sourcesContent":["'use client';\nimport React, { useEffect, useRef, useState } from 'react';\nimport { MarkerClusterer, SuperClusterAlgorithm } from \"@googlemaps/markerclusterer\";\n\nconst GOOGLE_MAPS_API_KEY = process.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY || '';\n\ninterface Property {\n  id: number;\n  address: string;\n  price: number;\n  latitude: number;\n  longitude: number;\n  description: string;\n  squareFeet: number;\n}\n\ninterface MapProps {\n  isPinMode: boolean;\n  setPinMode: (value: boolean) => void;\n  searchRadius: number;\n  hasActivePin: boolean;\n  setHasActivePin: (value: boolean) => void;\n  isConfirmMode: boolean;\n  setIsConfirmMode: (value: boolean) => void;\n  onPinPositionChange: (lat: number, lng: number) => void;\n  properties: Property[]; \n  onPropertyClick?: (lat: number, lng: number) => void;\n  onMapClick?: (lat: number, lng: number) => void;\n  // This is the crucial new prop\n  onBoundsChange?: (bounds: { minLat: number, maxLat: number, minLng: number, maxLng: number }) => void;\n  searchLocation?: string;\n}\n\nexport default function GoogleMapsComponent({ \n  isPinMode, \n  setPinMode, \n  searchRadius,\n  hasActivePin,\n  setHasActivePin,\n  isConfirmMode,\n  setIsConfirmMode,\n  onPinPositionChange,\n  properties, \n  onPropertyClick, \n  onMapClick,\n  onBoundsChange, // <--- We use this to tell the parent \"I moved!\"\n  searchLocation \n}: MapProps) {\n  const mapRef = useRef<HTMLDivElement>(null);\n  const mapInstanceRef = useRef<google.maps.Map | null>(null);\n  const clustererRef = useRef<MarkerClusterer | null>(null);\n  \n  // Refs for \"Make a Wish\" Pin\n  const currentMarkerRef = useRef<any>(null); \n  const currentCircleRef = useRef<google.maps.Circle | null>(null);\n  \n  // Ref for \"Landlord\" Selection Marker\n  const selectionMarkerRef = useRef<google.maps.Marker | null>(null);\n\n  const [isLoaded, setIsLoaded] = useState(false);\n\n  // 1. Load Script\n  useEffect(() => {\n    if (window.google?.maps) { setIsLoaded(true); return; }\n    const script = document.createElement('script');\n    script.src = `https://maps.googleapis.com/maps/api/js?key=${GOOGLE_MAPS_API_KEY}&v=weekly&libraries=marker,places,geometry`; \n    script.async = true;\n    script.onload = () => setIsLoaded(true);\n    document.head.appendChild(script);\n  }, []);\n\n  // 2. Initialize Map & Setup \"Idle\" Listener\n  useEffect(() => {\n    if (!isLoaded || !mapRef.current || mapInstanceRef.current) return;\n    \n    const map = new google.maps.Map(mapRef.current, {\n      zoom: 13,\n      center: { lat: 40.5795, lng: -74.1502 }, // Centered on Staten Island/NYC\n      mapId: 'DEMO_MAP_ID', \n      disableDefaultUI: true, \n      zoomControl: true,\n    });\n    \n    mapInstanceRef.current = map;\n\n    // --- THIS IS THE KEY PART ---\n    // When the user stops dragging/zooming, we calculate the visible box\n    map.addListener('idle', () => {\n        if (onBoundsChange) {\n            const bounds = map.getBounds();\n            if (bounds) {\n                const ne = bounds.getNorthEast(); // Top Right\n                const sw = bounds.getSouthWest(); // Bottom Left\n                \n                onBoundsChange({\n                    maxLat: ne.lat(),\n                    maxLng: ne.lng(),\n                    minLat: sw.lat(),\n                    minLng: sw.lng()\n                });\n            }\n        }\n    });\n\n  }, [isLoaded, onBoundsChange]);\n\n  // 3. Handle Search Teleporting\n  useEffect(() => {\n    if (!searchLocation || !mapInstanceRef.current || !window.google) return;\n    const geocoder = new google.maps.Geocoder();\n    geocoder.geocode({ address: searchLocation }, (results, status) => {\n        if (status === 'OK' && results && results[0]) {\n            const location = results[0].geometry.location;\n            mapInstanceRef.current?.panTo(location);\n            mapInstanceRef.current?.setZoom(14);\n        }\n    });\n  }, [searchLocation, isLoaded]);\n\n  // 4. Render Properties (Clustering)\n  useEffect(() => {\n    if (!mapInstanceRef.current || !window.google) return;\n    \n    // Clear old clusters\n    if (clustererRef.current) {\n        clustererRef.current.clearMarkers();\n        clustererRef.current = null;\n    }\n\n    const loadMarkers = async () => {\n        const { AdvancedMarkerElement } = await google.maps.importLibrary(\"marker\") as google.maps.MarkerLibrary;\n        const newMarkers: google.maps.marker.AdvancedMarkerElement[] = [];\n\n        // Safety check to handle empty data gracefully\n        (properties || []).forEach((prop) => {\n            const tag = document.createElement('div');\n            // Custom styling for the pins\n            tag.className = 'bg-blue-600 text-white px-2 py-1 rounded shadow-md text-xs font-bold border border-white transform hover:scale-110 transition-transform cursor-pointer';\n            const size = prop.squareFeet ? prop.squareFeet.toLocaleString() : '?';\n            tag.innerText = `${size} sf`;\n            \n            const marker = new AdvancedMarkerElement({\n                position: { lat: prop.latitude, lng: prop.longitude },\n                content: tag,\n                title: prop.address\n            });\n\n            marker.addListener(\"click\", () => {\n                if (onPropertyClick) onPropertyClick(prop.latitude, prop.longitude);\n                mapInstanceRef.current?.panTo({ lat: prop.latitude, lng: prop.longitude });\n            });\n            newMarkers.push(marker);\n        });\n\n        clustererRef.current = new MarkerClusterer({ \n            map: mapInstanceRef.current, \n            markers: newMarkers,\n            algorithm: new SuperClusterAlgorithm({ maxZoom: 15, radius: 50 }) \n        });\n    };\n    loadMarkers();\n  }, [properties, isLoaded, onPropertyClick]); \n\n  // 5. Update Circle Radius\n  useEffect(() => {\n    if (currentCircleRef.current) {\n      const meters = searchRadius * 1609.34;\n      currentCircleRef.current.setRadius(meters);\n    }\n  }, [searchRadius]);\n\n  // 6. Clear Pin if Cancelled\n  useEffect(() => {\n    if (!hasActivePin) {\n      if (currentMarkerRef.current) { currentMarkerRef.current.map = null; currentMarkerRef.current = null; }\n      if (currentCircleRef.current) { currentCircleRef.current.setMap(null); currentCircleRef.current = null; }\n    }\n  }, [hasActivePin]);\n\n  // 7. Toggle Draggable\n  useEffect(() => {\n    if (currentMarkerRef.current) {\n      currentMarkerRef.current.gmpDraggable = isConfirmMode;\n    }\n  }, [isConfirmMode]);\n\n  // 8. PIN MODE LOGIC\n  useEffect(() => {\n    if (!mapInstanceRef.current || !isPinMode) return;\n    const map = mapInstanceRef.current;\n    map.setOptions({ draggableCursor: 'crosshair' });\n\n    const clickListener = map.addListener('click', async (e: google.maps.MapMouseEvent) => {\n      if (!e.latLng) return;\n      onPinPositionChange(e.latLng.lat(), e.latLng.lng());\n\n      if (currentMarkerRef.current) currentMarkerRef.current.map = null;\n      if (currentCircleRef.current) currentCircleRef.current.setMap(null);\n\n      const { AdvancedMarkerElement } = await google.maps.importLibrary(\"marker\") as google.maps.MarkerLibrary;\n      const pinElement = document.createElement('div');\n      pinElement.className = 'bg-white text-blue-600 px-3 py-1 rounded-full border-2 border-blue-600 font-bold shadow-lg text-sm cursor-grab';\n      pinElement.innerText = 'New Wish';\n\n      const newMarker = new AdvancedMarkerElement({\n        map,\n        position: e.latLng,\n        content: pinElement,\n        gmpDraggable: true, \n      });\n\n      const newCircle = new google.maps.Circle({\n        map,\n        center: e.latLng,\n        radius: searchRadius * 1609.34,\n        fillColor: \"#1a73e8\",\n        fillOpacity: 0.2,\n        strokeColor: \"#1a73e8\",\n        strokeWeight: 1,\n        clickable: false,\n      });\n\n      newMarker.addListener('drag', () => {\n        const newPos = newMarker.position as google.maps.LatLng;\n        if (newPos) {\n          newCircle.setCenter(newPos);\n          if(typeof newPos.lat === 'function') onPinPositionChange(newPos.lat(), newPos.lng());\n        }\n      });\n      newMarker.addListener('dragend', () => {\n          const newPos = newMarker.position as google.maps.LatLng;\n          if(newPos && typeof newPos.lat === 'function') onPinPositionChange(newPos.lat(), newPos.lng());\n      });\n\n      currentMarkerRef.current = newMarker;\n      currentCircleRef.current = newCircle;\n      setHasActivePin(true);\n      setIsConfirmMode(true); \n      setPinMode(false);\n      map.setOptions({ draggableCursor: null });\n    });\n    return () => google.maps.event.removeListener(clickListener);\n  }, [isPinMode, searchRadius, setPinMode, setHasActivePin, setIsConfirmMode, onPinPositionChange]);\n\n  // 9. GENERIC CLICK LISTENER (FIXED)\n  useEffect(() => {\n    if (!mapInstanceRef.current || isPinMode) return; \n    \n    const map = mapInstanceRef.current;\n    const listener = map.addListener('click', (e: google.maps.MapMouseEvent) => {\n      if (onMapClick && e.latLng) {\n        onMapClick(e.latLng.lat(), e.latLng.lng());\n        \n        if (selectionMarkerRef.current) {\n            selectionMarkerRef.current.setMap(null);\n        }\n\n        selectionMarkerRef.current = new google.maps.Marker({ \n          position: e.latLng, \n          map: map, \n          icon: { \n            path: google.maps.SymbolPath.CIRCLE, \n            scale: 7, \n            fillColor: \"black\", \n            fillOpacity: 1, \n            strokeWeight: 2, \n            strokeColor: \"white\", \n          } \n        });\n      }\n    });\n    return () => google.maps.event.removeListener(listener);\n  }, [isPinMode, onMapClick, isLoaded]);\n\n  return (\n    <div className=\"w-full h-full relative\">\n      <div ref={mapRef} className=\"w-full h-full\" />\n    </div>\n  );\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 455, "column": 0}, "map": {"version":3,"sources":["file:///home/parker/winterproject/frontend/src/app/retail-space/landlordForm.tsx"],"sourcesContent":["'use client';\nimport React, { useEffect, useRef } from 'react';\nimport Link from 'next/link';\n\ninterface LandlordFormProps {\n  formData: {\n    address: string;\n    description: string;\n    price: string;\n    squareFeet: string;\n    latitude: string;\n    longitude: string;\n  };\n  setFormData: React.Dispatch<React.SetStateAction<any>>;\n  onSubmit: (e: React.FormEvent) => void;\n  status: string;\n}\n\nexport default function LandlordForm({ formData, setFormData, onSubmit, status }: LandlordFormProps) {\n  \n  // 1. Create a reference for the input element\n  const addressInputRef = useRef<HTMLInputElement>(null);\n\n  // 2. Initialize Google Autocomplete with a Safety Check\n  useEffect(() => {\n    // Helper function to attach autocomplete once Google is ready\n    const initAutocomplete = () => {\n      if (!addressInputRef.current || !window.google || !window.google.maps || !window.google.maps.places) {\n        return;\n      }\n\n      const autocomplete = new window.google.maps.places.Autocomplete(addressInputRef.current, {\n        types: ['address'], \n        componentRestrictions: { country: 'us' } \n      });\n\n      // Listen for when the user selects an address\n      autocomplete.addListener('place_changed', () => {\n        const place = autocomplete.getPlace();\n\n        if (place.geometry && place.geometry.location) {\n          const lat = place.geometry.location.lat();\n          const lng = place.geometry.location.lng();\n          const formattedAddress = place.formatted_address || '';\n\n          // Update the Form Data automatically\n          setFormData((prev: any) => ({\n            ...prev,\n            address: formattedAddress,\n            latitude: lat.toString(),\n            longitude: lng.toString()\n          }));\n        }\n      });\n    };\n\n    // LOGIC: Check if Google is ready. If not, wait for it.\n    if (window.google && window.google.maps && window.google.maps.places) {\n      // Script is already loaded\n      initAutocomplete();\n    } else {\n      // Script is loading... check every 100ms\n      const checkForGoogle = setInterval(() => {\n        if (window.google && window.google.maps && window.google.maps.places) {\n          clearInterval(checkForGoogle);\n          initAutocomplete();\n        }\n      }, 100);\n\n      // Cleanup interval if user leaves page\n      return () => clearInterval(checkForGoogle);\n    }\n  }, [setFormData]);\n\n  return (\n    <div className=\"w-1/3 p-8 bg-white overflow-y-auto border-r border-gray-200\">\n      \n      <div className=\"flex justify-between items-center mb-6\">\n        <h1 className=\"text-2xl font-bold text-gray-800\">Post a Space</h1>\n        <Link href=\"/\" className=\"text-sm text-blue-600 hover:underline\">\n          ‚Üê Back to Map\n        </Link>\n      </div>\n\n      <form onSubmit={onSubmit} className=\"space-y-4\">\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">Building Name / Address</label>\n          <input \n            ref={addressInputRef} // <--- This connects the input to Google\n            required\n            type=\"text\" \n            placeholder=\"Start typing an address...\"\n            className=\"w-full p-3 border rounded-lg bg-gray-50 focus:ring-2 focus:ring-blue-500 outline-none\"\n            value={formData.address}\n            onChange={e => setFormData({...formData, address: e.target.value})}\n          />\n        </div>\n\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">Description</label>\n          <textarea \n            placeholder=\"e.g. Corner unit, great visibility...\"\n            className=\"w-full p-3 border rounded-lg bg-gray-50 focus:ring-2 focus:ring-blue-500 outline-none\"\n            rows={3}\n            value={formData.description}\n            onChange={e => setFormData({...formData, description: e.target.value})}\n          />\n        </div>\n\n        {/* Price and Square Feet Row */}\n        <div className=\"grid grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">Monthly Rent ($)</label>\n              <input \n                required\n                type=\"number\" \n                placeholder=\"5000\"\n                className=\"w-full p-3 border rounded-lg bg-gray-50 focus:ring-2 focus:ring-blue-500 outline-none\"\n                value={formData.price}\n                onChange={e => setFormData({...formData, price: e.target.value})}\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">Size (Sq Ft)</label>\n              <input \n                required\n                type=\"number\" \n                placeholder=\"1200\"\n                className=\"w-full p-3 border rounded-lg bg-gray-50 focus:ring-2 focus:ring-blue-500 outline-none\"\n                value={formData.squareFeet}\n                onChange={e => setFormData({...formData, squareFeet: e.target.value})}\n              />\n            </div>\n        </div>\n\n        <div className=\"grid grid-cols-2 gap-4\">\n          <div>\n            <label className=\"block text-xs font-medium text-gray-500 mb-1\">Latitude</label>\n            <input \n              type=\"text\" \n              readOnly \n              className=\"w-full p-2 border rounded text-sm bg-gray-100 cursor-not-allowed\"\n              value={formData.latitude}\n            />\n          </div>\n          <div>\n            <label className=\"block text-xs font-medium text-gray-500 mb-1\">Longitude</label>\n            <input \n              type=\"text\" \n              readOnly \n              className=\"w-full p-2 border rounded text-sm bg-gray-100 cursor-not-allowed\"\n              value={formData.longitude}\n            />\n          </div>\n        </div>\n        \n        <div className=\"p-3 bg-blue-50 text-blue-700 text-sm rounded-lg\">\n           üìç Search address above OR click on map.\n        </div>\n\n        <button \n          type=\"submit\" \n          className=\"w-full bg-black text-white font-bold py-3 rounded-xl hover:bg-gray-800 transition-all mt-4\"\n        >\n          Post Listing\n        </button>\n\n        {status && (\n          <p className={`text-center text-sm font-semibold mt-2 ${status.includes('Success') ? 'text-green-600' : 'text-red-500'}`}>\n            {status}\n          </p>\n        )}\n      </form>\n    </div>\n  );\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 809, "column": 0}, "map": {"version":3,"sources":["file:///home/parker/winterproject/frontend/src/app/retail-space/page.tsx"],"sourcesContent":["'use client';\nimport React, { useState } from 'react';\nimport Topbar from '../topbar';\nimport GoogleMapsComponent from '../map';\nimport LandlordForm from './landlordForm'; // <--- Import the new component\n\nexport default function LandlordPage() {\n  \n  const [formData, setFormData] = useState({\n    address: '',\n    description: '',\n    price: '',\n    squareFeet: '',\n    latitude: '40.7484',\n    longitude: '-73.9857'\n  });\n  const [status, setStatus] = useState<string>('');\n\n  // 1. Handle Map Clicks\n  const handleMapClick = (lat: number, lng: number) => {\n    setFormData(prev => ({\n      ...prev,\n      latitude: lat.toString(),\n      longitude: lng.toString()\n    }));\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setStatus('Saving...');\n\n    try {\n      const res = await fetch('http://localhost:8080/api/properties', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          address: formData.address,\n          description: formData.description,\n          price: parseFloat(formData.price),\n          squareFeet: formData.squareFeet ? parseInt(formData.squareFeet) : 0,\n          latitude: parseFloat(formData.latitude),\n          longitude: parseFloat(formData.longitude)\n        })\n      });\n\n      if (res.ok) {\n        setStatus('Success! Property listed.');\n        setFormData({ \n            address: '', description: '', price: '', squareFeet: '', \n            latitude: '40.7484', longitude: '-73.9857' \n        });\n      } else {\n        setStatus('Error saving property.');\n      }\n    } catch (err) {\n      console.error(err);\n      setStatus('Network error.');\n    }\n  };\n\n  return (\n    <>\n      <Topbar />\n      <div className=\"flex h-[calc(100vh-64px)]\">\n        \n        {/* REPLACED HUGE BLOCK WITH ONE LINE */}\n        <LandlordForm \n            formData={formData} \n            setFormData={setFormData} \n            onSubmit={handleSubmit} \n            status={status} \n        />\n\n        {/* Right Side: Map */}\n        <div className=\"w-2/3 relative\">\n          <GoogleMapsComponent \n            isPinMode={false}\n            setPinMode={() => {}}\n            searchRadius={1}\n            hasActivePin={false}\n            setHasActivePin={() => {}}\n            isConfirmMode={false}\n            setIsConfirmMode={() => {}}\n            onPinPositionChange={() => {}}\n            properties={[]} \n            onMapClick={handleMapClick}\n          />\n        </div>\n      </div>\n    </>\n  );\n}"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA,mRAA2C,gCAAgC;;;AAJ3E;;;;;AAMe,SAAS;;IAEtB,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,qLAAQ,EAAC;QACvC,SAAS;QACT,aAAa;QACb,OAAO;QACP,YAAY;QACZ,UAAU;QACV,WAAW;IACb;IACA,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,qLAAQ,EAAS;IAE7C,uBAAuB;IACvB,MAAM,iBAAiB,CAAC,KAAa;QACnC,YAAY,CAAA,OAAQ,CAAC;gBACnB,GAAG,IAAI;gBACP,UAAU,IAAI,QAAQ;gBACtB,WAAW,IAAI,QAAQ;YACzB,CAAC;IACH;IAEA,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,UAAU;QAEV,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,wCAAwC;gBAC9D,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBACnB,SAAS,SAAS,OAAO;oBACzB,aAAa,SAAS,WAAW;oBACjC,OAAO,WAAW,SAAS,KAAK;oBAChC,YAAY,SAAS,UAAU,GAAG,SAAS,SAAS,UAAU,IAAI;oBAClE,UAAU,WAAW,SAAS,QAAQ;oBACtC,WAAW,WAAW,SAAS,SAAS;gBAC1C;YACF;YAEA,IAAI,IAAI,EAAE,EAAE;gBACV,UAAU;gBACV,YAAY;oBACR,SAAS;oBAAI,aAAa;oBAAI,OAAO;oBAAI,YAAY;oBACrD,UAAU;oBAAW,WAAW;gBACpC;YACF,OAAO;gBACL,UAAU;YACZ;QACF,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC;YACd,UAAU;QACZ;IACF;IAEA,qBACE;;0BACE,yMAAC,+IAAM;;;;;0BACP,yMAAC;gBAAI,WAAU;;kCAGb,yMAAC,wKAAY;wBACT,UAAU;wBACV,aAAa;wBACb,UAAU;wBACV,QAAQ;;;;;;kCAIZ,yMAAC;wBAAI,WAAU;kCACb,cAAA,yMAAC,4IAAmB;4BAClB,WAAW;4BACX,YAAY,KAAO;4BACnB,cAAc;4BACd,cAAc;4BACd,iBAAiB,KAAO;4BACxB,eAAe;4BACf,kBAAkB,KAAO;4BACzB,qBAAqB,KAAO;4BAC5B,YAAY,EAAE;4BACd,YAAY;;;;;;;;;;;;;;;;;;;AAMxB;GArFwB;KAAA"}}]
}